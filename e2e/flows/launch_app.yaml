# Launch App Flow
# Handles launching Expo Go and connecting to the development server

appId: host.exp.Exponent

---

# Launch Expo Go first
- launchApp:
    clearState: true
    clearKeychain: true

# Wait for Expo Go to be ready
- extendedWaitUntil:
    visible:
      text: "Expo Go"
    timeout: 30000

# Open the dev server URL (use 127.0.0.1 for reliability)
- openLink: "exp://127.0.0.1:8081"

# Wait for the app to load - look for the app title or welcome screen
- extendedWaitUntil:
    visible:
      text: "Nutri"
    timeout: 180000

# Wait for any loading to complete
- extendedWaitUntil:
    visible:
      id: "welcome-screen"
    timeout: 30000

# At this point, app should show welcome screen with Sign In button
