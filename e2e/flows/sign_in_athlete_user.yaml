# Reusable flow: Sign in with Athlete User
# Signs in with the athlete test user (high activity, lots of data)

appId: host.exp.Exponent

env:
  ATHLETE_USER_EMAIL: "athlete@nutri-e2e.local"
  ATHLETE_USER_PASSWORD: "AthletePass123!"

---

# Launch and navigate to app
- runFlow: launch_app.yaml

# Navigate to sign in
- tapOn:
    text: "Sign In"

# Wait for sign in screen
- assertVisible:
    id: "signin-screen"

# Enter athlete user credentials
- tapOn:
    id: "signin-email-input"
- inputText: ${ATHLETE_USER_EMAIL}

- tapOn:
    id: "signin-password-input"
- inputText: ${ATHLETE_USER_PASSWORD}

# Submit form
- tapOn:
    id: "signin-submit-button"

# Dismiss iOS "Save Password?" dialog if it appears
- tapOn:
    text: "Not Now"
    optional: true

# Wait for navigation to home
- extendedWaitUntil:
    visible:
      id: "home-screen"
    timeout: 30000
