# Reset Password E2E Tests
# Tests the password reset flow with token
# Note: Tests requiring deep linking with tokens are limited in Expo Go dev environment

appId: host.exp.Exponent

env:
  TEST_USER_EMAIL: "test@nutri-e2e.local"

---

# Test: Reset Password Flow - Request Token
- runFlow: ../../flows/launch_app.yaml

# Navigate to forgot password flow
- tapOn:
    text: "Sign In"
- tapOn:
    id: "signin-forgot-password-link"
- assertVisible:
    id: "forgot-password-screen"

# Submit email to request token
- tapOn:
    id: "forgot-password-email-input"
- inputText: ${TEST_USER_EMAIL}
- tapOn:
    id: "forgot-password-submit-button"

# Verify the success screen is shown
- extendedWaitUntil:
    visible:
      id: "forgot-password-success-screen"
    timeout: 15000

# Note: Full reset password testing requires deep linking which
# is complex in Expo Go development mode. The token-based flows
# would be tested in a production build or with a development build
# that supports custom URL schemes.
