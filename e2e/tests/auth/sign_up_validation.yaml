# Sign Up Validation E2E Tests
# Tests error handling and form validation for sign up

appId: host.exp.Exponent

---

# Test: Empty Fields Validation
- runFlow: ../../flows/launch_app.yaml

# Scroll down to make Create Account button fully visible
- swipe:
    start: "50%,90%"
    end: "50%,70%"
    duration: 300

- tapOn:
    text: "Create Account"

- extendedWaitUntil:
    visible:
      id: "signup-screen"
    timeout: 10000

# Try to submit without entering anything
- tapOn:
    id: "signup-submit-button"

# Should stay on same screen
- assertVisible:
    id: "signup-screen"

---

# Test: Password Mismatch
- runFlow: ../../flows/launch_app.yaml

# Scroll down to make Create Account button fully visible
- swipe:
    start: "50%,90%"
    end: "50%,70%"
    duration: 300

- tapOn:
    text: "Create Account"

- extendedWaitUntil:
    visible:
      id: "signup-screen"
    timeout: 10000

# Fill form with mismatched passwords
- tapOn:
    id: "signup-name-input"
- inputText: "Test User"
- hideKeyboard

- tapOn:
    id: "signup-email-input"
- inputText: "test@example.com"
- hideKeyboard

- tapOn:
    id: "signup-password-input"
- inputText: "password123"
- hideKeyboard

- tapOn:
    id: "signup-confirm-password-input"
- inputText: "different123"
- hideKeyboard

- tapOn:
    id: "signup-submit-button"

# Should stay on sign up screen
- assertVisible:
    id: "signup-screen"

---

# Test: Weak Password
- runFlow: ../../flows/launch_app.yaml

# Scroll down to make Create Account button fully visible
- swipe:
    start: "50%,90%"
    end: "50%,70%"
    duration: 300

- tapOn:
    text: "Create Account"

- extendedWaitUntil:
    visible:
      id: "signup-screen"
    timeout: 10000

# Fill form with weak password (no numbers)
- tapOn:
    id: "signup-name-input"
- inputText: "Test User"
- hideKeyboard

- tapOn:
    id: "signup-email-input"
- inputText: "test@example.com"
- hideKeyboard

- tapOn:
    id: "signup-password-input"
- inputText: "password"
- hideKeyboard

- tapOn:
    id: "signup-confirm-password-input"
- inputText: "password"
- hideKeyboard

- tapOn:
    id: "signup-submit-button"

# Should stay on sign up screen
- assertVisible:
    id: "signup-screen"

---

# Test: Short Password
- runFlow: ../../flows/launch_app.yaml

# Scroll down to make Create Account button fully visible
- swipe:
    start: "50%,90%"
    end: "50%,70%"
    duration: 300

- tapOn:
    text: "Create Account"

- extendedWaitUntil:
    visible:
      id: "signup-screen"
    timeout: 10000

# Fill form with short password
- tapOn:
    id: "signup-name-input"
- inputText: "Test User"
- hideKeyboard

- tapOn:
    id: "signup-email-input"
- inputText: "test@example.com"
- hideKeyboard

- tapOn:
    id: "signup-password-input"
- inputText: "ab1"
- hideKeyboard

- tapOn:
    id: "signup-confirm-password-input"
- inputText: "ab1"
- hideKeyboard

- tapOn:
    id: "signup-submit-button"

# Should stay on sign up screen
- assertVisible:
    id: "signup-screen"

---

# Test: Navigation to Sign In
- runFlow: ../../flows/launch_app.yaml

# Scroll down to make Create Account button fully visible
- swipe:
    start: "50%,90%"
    end: "50%,70%"
    duration: 300

- tapOn:
    text: "Create Account"

- extendedWaitUntil:
    visible:
      id: "signup-screen"
    timeout: 10000

# Tap sign in link
- tapOn:
    id: "signup-signin-link"

# Should navigate to sign in screen
- extendedWaitUntil:
    visible:
      id: "signin-screen"
    timeout: 10000
