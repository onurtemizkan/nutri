# Forgot Password E2E Tests
# Tests the password reset request flow

appId: host.exp.Exponent

---

# Test: Submit Forgot Password Request
- launchApp:
    clearState: true

# Navigate to forgot password
- assertVisible:
    id: "welcome-screen"
- tapOn:
    id: "welcome-signin-button"
- assertVisible:
    id: "signin-screen"
- tapOn:
    id: "signin-forgot-password-link"

# Verify forgot password screen
- assertVisible:
    id: "forgot-password-screen"

# Enter email
- tapOn:
    id: "forgot-password-email-input"
- inputText: ${TEST_USER_EMAIL}

# Submit request
- tapOn:
    id: "forgot-password-submit-button"

# Should show success screen
- assertVisible:
    id: "forgot-password-success-screen"

---

# Test: Empty Email Validation
- launchApp:
    clearState: true

- assertVisible:
    id: "welcome-screen"
- tapOn:
    id: "welcome-signin-button"
- tapOn:
    id: "signin-forgot-password-link"
- assertVisible:
    id: "forgot-password-screen"

# Try to submit without email
- tapOn:
    id: "forgot-password-submit-button"

# Should stay on forgot password screen
- assertVisible:
    id: "forgot-password-screen"

---

# Test: Invalid Email Format
- launchApp:
    clearState: true

- assertVisible:
    id: "welcome-screen"
- tapOn:
    id: "welcome-signin-button"
- tapOn:
    id: "signin-forgot-password-link"
- assertVisible:
    id: "forgot-password-screen"

# Enter invalid email
- tapOn:
    id: "forgot-password-email-input"
- inputText: "not-an-email"

- tapOn:
    id: "forgot-password-submit-button"

# Should stay on forgot password screen
- assertVisible:
    id: "forgot-password-screen"

---

# Test: Back to Sign In from Forgot Password
- launchApp:
    clearState: true

- assertVisible:
    id: "welcome-screen"
- tapOn:
    id: "welcome-signin-button"
- tapOn:
    id: "signin-forgot-password-link"
- assertVisible:
    id: "forgot-password-screen"

# Tap sign in link
- tapOn:
    id: "forgot-password-signin-link"

# Should navigate to sign in screen
- assertVisible:
    id: "signin-screen"

---

# Test: Try Another Email from Success Screen
- launchApp:
    clearState: true

- assertVisible:
    id: "welcome-screen"
- tapOn:
    id: "welcome-signin-button"
- tapOn:
    id: "signin-forgot-password-link"
- assertVisible:
    id: "forgot-password-screen"

# Submit valid email
- tapOn:
    id: "forgot-password-email-input"
- inputText: ${TEST_USER_EMAIL}
- tapOn:
    id: "forgot-password-submit-button"

# Wait for success screen
- assertVisible:
    id: "forgot-password-success-screen"

# Tap try another email
- tapOn:
    id: "forgot-password-try-another-email-button"

# Should go back to forgot password form
- assertVisible:
    id: "forgot-password-screen"

---

# Test: Back to Sign In from Success Screen
- launchApp:
    clearState: true

- assertVisible:
    id: "welcome-screen"
- tapOn:
    id: "welcome-signin-button"
- tapOn:
    id: "signin-forgot-password-link"
- assertVisible:
    id: "forgot-password-screen"

# Submit valid email
- tapOn:
    id: "forgot-password-email-input"
- inputText: ${TEST_USER_EMAIL}
- tapOn:
    id: "forgot-password-submit-button"

# Wait for success screen
- assertVisible:
    id: "forgot-password-success-screen"

# Tap back to sign in
- tapOn:
    id: "forgot-password-back-to-signin-button"

# Should navigate to sign in
- assertVisible:
    id: "signin-screen"
