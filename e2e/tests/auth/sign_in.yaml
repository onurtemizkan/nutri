# Sign In E2E Tests
# Tests the complete sign in flow including validation

appId: host.exp.Exponent

# Test user credentials (from seed data)
env:
  TEST_EMAIL: "test@nutri-e2e.local"
  TEST_PASSWORD: "TestPass123!"

---

# Test: Successful Sign In

# Launch app and connect to dev server
- runFlow: ../../flows/launch_app.yaml

# Navigate to sign in (use text since inspector may interfere with testID)
- tapOn:
    text: "Sign In"

# Verify sign in screen is visible
- assertVisible:
    id: "signin-screen"

# Enter valid credentials
- tapOn:
    id: "signin-email-input"
- inputText: ${TEST_EMAIL}

- tapOn:
    id: "signin-password-input"
- inputText: ${TEST_PASSWORD}

# Submit form
- tapOn:
    id: "signin-submit-button"

# Dismiss iOS "Save Password?" dialog if it appears
- tapOn:
    text: "Not Now"
    optional: true

# Wait longer for navigation to home screen (network request)
- extendedWaitUntil:
    visible:
      id: "home-screen"
    timeout: 30000
