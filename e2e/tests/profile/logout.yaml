# Logout E2E Tests
# Tests the logout flow

appId: host.exp.Exponent

---

# Test: Logout Flow
- runFlow: ../../flows/sign_in_test_user.yaml

- assertVisible:
    id: "home-screen"

# Navigate to profile using coordinates (83%, 95%)
- tapOn:
    point: "83%,95%"

- extendedWaitUntil:
    visible:
      id: "profile-screen"
    timeout: 10000

# Scroll down to find logout button
- swipe:
    start: "50%,80%"
    end: "50%,30%"
    duration: 300

# Tap logout
- tapOn:
    id: "profile-logout-button"

# Wait a moment for modal to appear
- waitForAnimationToEnd

# Confirm logout - tap the red Logout button in the modal (73% x, 54% y)
- tapOn:
    point: "73%,54%"

# Should navigate to welcome screen
- extendedWaitUntil:
    visible:
      id: "welcome-screen"
    timeout: 15000

---

# Test: Cancel Logout
- runFlow: ../../flows/sign_in_test_user.yaml

- assertVisible:
    id: "home-screen"

# Navigate to profile using coordinates (83%, 95%)
- tapOn:
    point: "83%,95%"

- extendedWaitUntil:
    visible:
      id: "profile-screen"
    timeout: 10000

# Scroll down to find logout button
- swipe:
    start: "50%,80%"
    end: "50%,30%"
    duration: 300

# Tap logout
- tapOn:
    id: "profile-logout-button"

# Wait a moment for modal to appear
- waitForAnimationToEnd

# Cancel logout - tap Cancel button in the modal (38% x, 54% y)
- tapOn:
    point: "38%,54%"

# Should stay on profile screen
- assertVisible:
    id: "profile-screen"
