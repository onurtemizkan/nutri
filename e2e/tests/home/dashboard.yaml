# Home/Dashboard E2E Tests
# Tests the main dashboard functionality

appId: host.exp.Exponent

---

# Test: View Dashboard After Login
- runFlow: ../../flows/sign_in_test_user.yaml

# Verify home screen elements
- assertVisible:
    id: "home-screen"

- assertVisible:
    id: "home-calorie-summary"
    optional: true

- assertVisible:
    id: "home-macros-container"
    optional: true

- assertVisible:
    id: "home-meals-section"
    optional: true

- assertVisible:
    id: "home-add-meal-fab"

---

# Test: Navigate to Add Meal via FAB
- runFlow: ../../flows/sign_in_test_user.yaml

- assertVisible:
    id: "home-screen"

# Tap FAB to add meal
- tapOn:
    id: "home-add-meal-fab"

# Verify add meal screen opens
- extendedWaitUntil:
    visible:
      id: "add-meal-screen"
    timeout: 10000

---

# Test: Pull to Refresh Dashboard
- runFlow: ../../flows/sign_in_test_user.yaml

- assertVisible:
    id: "home-screen"

# Pull down to refresh
- swipe:
    direction: DOWN
    duration: 500

# Dashboard should still be visible after refresh
- assertVisible:
    id: "home-screen"
