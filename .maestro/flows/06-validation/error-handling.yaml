appId: ${APP_ID}

# Test: Error Handling and Validation
# Validates: Input validation and error messages

- launchApp

---
# Test 1: Invalid Email Format
- tapOn: "Sign In"
- tapOn:
    text: "your@email.com"
- inputText: "invalid-email"
- tapOn:
    text: "Enter your password"
- inputText: "Test123"
- tapOn: "Sign In"

# Verify error message
- assertVisible: "Error"
- assertVisible: "Please enter a valid email address"
- tapOn: "OK"

---
# Test 2: Short Password on Registration
- tapOn: "Back"
- tapOn: "Create Account"
- tapOn:
    text: "Your name"
- inputText: "Test User"
- tapOn:
    text: "your@email.com"
- inputText: "test@example.com"
- tapOn:
    text: "At least 6 characters"
- inputText: "12345"  # Only 5 characters
- tapOn:
    text: "Re-enter password"
- inputText: "12345"
- tapOn: "Create Account"

# Verify password length error
- assertVisible: "Error"
- assertVisible: "Password must be at least 6 characters"
- tapOn: "OK"

---
# Test 3: Password Mismatch
- tapOn:
    text: "12345"
- clearText
- inputText: "123456"
- tapOn:
    text: "12345"
- clearText
- inputText: "654321"  # Different password
- tapOn: "Create Account"

# Verify password mismatch error
- assertVisible: "Error"
- assertVisible: "Passwords do not match"
- tapOn: "OK"

---
# Test 4: Invalid Meal Data
- tapOn: "Back"
- tapOn: "Sign In"
- tapOn:
    text: "your@email.com"
- clearText
- inputText: "${TEST_EMAIL}"
- tapOn:
    text: "Enter your password"
- inputText: "${TEST_PASSWORD}"
- tapOn: "Sign In"

# Try to add meal with missing data
- tapOn: "Add Meal"
- tapOn: "Breakfast"
# Don't enter meal name, go straight to calories
- tapOn:
    text: "Calories"
- inputText: "abc"  # Invalid number
- tapOn: "Save"

# Verify validation error
- assertVisible: "Error"
- assertVisible: "Please enter a valid meal name"
- tapOn: "OK"

---
# Test 5: Negative Values Validation
- tapOn:
    text: "e.g., Grilled Chicken Salad"
- inputText: "Test Meal"
- tapOn:
    text: "Calories"
- clearText
- inputText: "-100"  # Negative calories
- tapOn: "Save"

# Verify negative value error
- assertVisible: "Error"
- assertVisible: "Values must be positive"
- tapOn: "OK"
