appId: ${APP_ID}

---
# Test: Edit Daily Goals Complete Flow
# Description: Validates editing and saving daily nutrition goals

- launchApp

# Login
- tapOn: "Sign In"
- tapOn:
    text: "your@email.com"
- inputText: "${TEST_EMAIL}"
- tapOn:
    text: "Enter your password"
- inputText: "${TEST_PASSWORD}"
- tapOn: "Sign In"

# Navigate to profile
- tapOn: "Profile"

# Enter edit mode
- tapOn: "Edit"

# Verify edit mode active (Save/Cancel buttons visible)
- assertVisible: "Save"
- assertVisible: "Cancel"

# Edit calorie goal
- tapOn:
    text: "Calorie Goal"
- clearTextField
- inputText: "2200"

# Edit protein goal
- tapOn:
    text: "Protein Goal"
- clearTextField
- inputText: "160"

# Edit carb goal
- tapOn:
    text: "Carb Goal"
- clearTextField
- inputText: "220"

# Edit fat goal
- tapOn:
    text: "Fat Goal"
- clearTextField
- inputText: "70"

# Save changes
- tapOn: "Save"

# Verify success message
- assertVisible: "Goals updated successfully"

# Verify new values displayed
- assertVisible: "2200"
- assertVisible: "160"
- assertVisible: "220"
- assertVisible: "70"

# Verify edit mode exited
- assertVisible: "Edit"
- assertNotVisible: "Save"
- assertNotVisible: "Cancel"

---
# Test: Cancel Edit Goals
# Description: Validates canceling goal edits doesn't save changes

- launchApp

# Login
- tapOn: "Sign In"
- tapOn:
    text: "your@email.com"
- inputText: "${TEST_EMAIL}"
- tapOn:
    text: "Enter your password"
- inputText: "${TEST_PASSWORD}"
- tapOn: "Sign In"

# Navigate to profile
- tapOn: "Profile"

# Remember original calorie goal
- assertVisible: "2000"  # Default goal

# Enter edit mode
- tapOn: "Edit"

# Edit calorie goal
- tapOn:
    text: "Calorie Goal"
- clearTextField
- inputText: "9999"

# Cancel changes
- tapOn: "Cancel"

# Verify original value still shown
- assertVisible: "2000"
- assertNotVisible: "9999"

# Verify edit mode exited
- assertVisible: "Edit"

---
# Test: Edit Goals - Navigate Away Without Saving
# Description: Validates unsaved changes are discarded when navigating away

- launchApp

# Login
- tapOn: "Sign In"
- tapOn:
    text: "your@email.com"
- inputText: "${TEST_EMAIL}"
- tapOn:
    text: "Enter your password"
- inputText: "${TEST_PASSWORD}"
- tapOn: "Sign In"

# Navigate to profile
- tapOn: "Profile"

# Enter edit mode
- tapOn: "Edit"

# Make changes
- tapOn:
    text: "Calorie Goal"
- clearTextField
- inputText: "9999"

# Navigate away without saving
- tapOn: "Home"

# Go back to profile
- tapOn: "Profile"

# Verify changes not saved
- assertNotVisible: "9999"

---
# Test: Edit Goals Validation - Invalid Input
# Description: Validates numeric validation on goal inputs

- launchApp

# Login
- tapOn: "Sign In"
- tapOn:
    text: "your@email.com"
- inputText: "${TEST_EMAIL}"
- tapOn:
    text: "Enter your password"
- inputText: "${TEST_PASSWORD}"
- tapOn: "Sign In"

# Navigate to profile
- tapOn: "Profile"

# Enter edit mode
- tapOn: "Edit"

# Try to enter non-numeric value (should be prevented by keyboardType="numeric")
# Numeric keyboard should only allow numbers
- tapOn:
    text: "Calorie Goal"
- clearTextField
- inputText: "0"  # Zero should be allowed but might trigger validation

# Try to save
- tapOn: "Save"

# System should either prevent save or show error
