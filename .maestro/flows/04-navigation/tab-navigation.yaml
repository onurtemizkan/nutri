appId: ${APP_ID}

---
# Test: Tab Navigation - Home to Profile
# Description: Validates switching from Home to Profile tab

- launchApp

# Login
- tapOn: "Sign In"
- tapOn:
    text: "your@email.com"
- inputText: "${TEST_EMAIL}"
- tapOn:
    text: "Enter your password"
- inputText: "${TEST_PASSWORD}"
- tapOn: "Sign In"

# Verify on Home tab
- assertVisible: "Hello, ${TEST_NAME}!"
- assertVisible: "Calories"
- assertVisible: "Home"
- assertVisible: "Profile"

# Switch to Profile tab
- tapOn: "Profile"

# Verify Profile tab content
- assertVisible: "${TEST_NAME}"
- assertVisible: "${TEST_EMAIL}"
- assertVisible: "Daily Goals"

# Verify Home tab is not active
- assertNotVisible: "Hello, ${TEST_NAME}!"

---
# Test: Tab Navigation - Profile to Home
# Description: Validates switching from Profile to Home tab

- launchApp

# Login
- tapOn: "Sign In"
- tapOn:
    text: "your@email.com"
- inputText: "${TEST_EMAIL}"
- tapOn:
    text: "Enter your password"
- inputText: "${TEST_PASSWORD}"
- tapOn: "Sign In"

# Navigate to Profile
- tapOn: "Profile"
- assertVisible: "${TEST_NAME}"
- assertVisible: "Daily Goals"

# Switch back to Home tab
- tapOn: "Home"

# Verify Home tab content
- assertVisible: "Hello, ${TEST_NAME}!"
- assertVisible: "Calories"

# Verify Profile content not visible
- assertNotVisible: "Daily Goals"

---
# Test: Tab Navigation - Persistence After Actions
# Description: Validates tab state persists after performing actions

- launchApp

# Login
- tapOn: "Sign In"
- tapOn:
    text: "your@email.com"
- inputText: "${TEST_EMAIL}"
- tapOn:
    text: "Enter your password"
- inputText: "${TEST_PASSWORD}"
- tapOn: "Sign In"

# Add a meal from Home tab
- tapOn: "Add Meal"
- tapOn: "Lunch"
- tapOn:
    text: "e.g., Grilled Chicken Salad"
- inputText: "Test Meal"
- tapOn:
    text: "Calories"
- inputText: "300"
- tapOn:
    text: "Protein"
- inputText: "20"
- tapOn:
    text: "Carbs"
- inputText: "30"
- tapOn:
    text: "Fat"
- inputText: "10"
- tapOn: "Save"
- tapOn: "OK"

# Verify still on Home tab after modal
- assertVisible: "Home"
- assertVisible: "Hello, ${TEST_NAME}!"

# Switch to Profile
- tapOn: "Profile"
- assertVisible: "Daily Goals"

# Switch back to Home
- tapOn: "Home"

# Verify meal added (calorie count updated)
- assertVisible: "Calories"

---
# Test: Tab Navigation - Rapid Switching
# Description: Validates tab navigation handles rapid switching

- launchApp

# Login
- tapOn: "Sign In"
- tapOn:
    text: "your@email.com"
- inputText: "${TEST_EMAIL}"
- tapOn:
    text: "Enter your password"
- inputText: "${TEST_PASSWORD}"
- tapOn: "Sign In"

# Rapid tab switching
- tapOn: "Profile"
- assertVisible: "Daily Goals"

- tapOn: "Home"
- assertVisible: "Calories"

- tapOn: "Profile"
- assertVisible: "Daily Goals"

- tapOn: "Home"
- assertVisible: "Calories"

- tapOn: "Profile"
- assertVisible: "Daily Goals"

# Final state should be stable
- assertVisible: "${TEST_NAME}"
- assertVisible: "${TEST_EMAIL}"
