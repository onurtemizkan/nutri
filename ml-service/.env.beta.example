# =============================================================================
# Nutri ML Service - Beta Environment Configuration
# =============================================================================
#
# This file documents environment variables for the BETA ML service.
# Copy to Coolify environment variables for the beta ML service application.
#
# =============================================================================

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME=Nutri ML Service (Beta)
APP_VERSION=1.0.0
ENVIRONMENT=beta
DEBUG=true  # Enable debug logging in beta for easier troubleshooting

# =============================================================================
# Server Configuration
# =============================================================================
HOST=0.0.0.0
PORT=8000
WORKERS=2  # Reduce workers in beta to save resources

# =============================================================================
# Database (Beta PostgreSQL)
# =============================================================================
# Must match backend's BETA_DATABASE_URL but with asyncpg driver
#
# If using Supabase Transaction Mode (port 6543), may need direct connection:
DATABASE_URL=postgresql+asyncpg://postgres.[beta-project-ref]:[password]@aws-0-[region].pooler.supabase.com:5432/postgres
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10

# =============================================================================
# Redis Cache (Beta)
# =============================================================================
# Option 1: Separate Upstash database for beta (recommended)
REDIS_URL=rediss://default:[password]@[beta-endpoint].upstash.io:6379

# Option 2: Same Upstash but different database number (0-15)
# REDIS_URL=rediss://default:[password]@[endpoint].upstash.io:6379/1

REDIS_MAX_CONNECTIONS=5

# =============================================================================
# Cache TTL (Beta - shorter for faster iteration)
# =============================================================================
CACHE_TTL_FEATURES=1800       # 30 minutes (shorter for testing)
CACHE_TTL_PREDICTIONS=43200   # 12 hours
CACHE_TTL_MODELS=86400        # 1 day

# =============================================================================
# ML Models
# =============================================================================
MODEL_STORAGE_PATH=./app/ml_models
MODEL_VERSION=v1.0.0

# Skip warmup for faster beta deployments (optional)
# SKIP_MODEL_WARMUP=false

# =============================================================================
# Feature Engineering
# =============================================================================
FEATURE_VERSION=v1.2.3
MIN_DATA_POINTS_FOR_ML=30

# =============================================================================
# CORS (Beta - allow more origins for testing)
# =============================================================================
CORS_ORIGINS=["*"]

# =============================================================================
# Logging (Beta - more verbose)
# =============================================================================
LOG_LEVEL=DEBUG
LOG_FORMAT=json

# =============================================================================
# Security
# =============================================================================
SECRET_KEY=your-beta-secret-key-DIFFERENT-from-production
ALGORITHM=HS256
